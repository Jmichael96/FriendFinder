<!DOCTYPE html>

<head>
    <title>Friend Finder Survey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"> </head>

<body>

    <div class="container">
        <div id="name" class="personal-info">
            <label for="name">Name:</label>
            <input type="text" name="name" id="nameFld" required>
        </div>
        <div id="pic" class="personal-info">
            <label for="picture">Picture URL:</label>
            <input type="text" name="picture" id="picFld">
        </div>
        <div id="instructions">
            Answer the following questions about your preferences regarding the mechanics or type of board games, popular games exemplifying
            Using your preferences we'll find your perfect board game buddy.
        </div>

        <div id="survey">
            <div class="questionBlock">
                <div class="question">Q1: Set Collection (Monopoly Deal, Gin, etc.)</div>
                <select class="answer browser-default" id="q1">
                    <option value=""></option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="questionBlock">
                <div class="question">Q2: Worker Placement (Agricola, Le Havre)</div>
                <select class="answer browser-default" id="q2">
                    <option value=""></option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="questionBlock">
                <divclass="question">Q3: Party Games (Taboo, Code Names, The Resistance)</div>
            <select class="answer browser-default" id="q3">
                <option value=""></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>
        <div class="questionBlock">
            <divclass="question">Q4: Story-telling (Dixit, Charades)</div>
        <select class="answer browser-default" id="q4">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
    </div>
    <div class="questionBlock">
        <divclass="question">Q5: Press your luck (Codenames, King of Tokyo, Pandemic, Ra)</div>
    <select class="answer browser-default" id="q5">
        <option value=""></option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
    </select>
    </div>
    <div class="questionBlock">
        <div class="question">Q6: Co-op (Pandemic, Arkham Horror) </div>
        <select class="answer browser-default" id="q6">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
    </div>
    <div class="questionBlock">
        <div class="question">Q7: Collectible Card Games - CCGs (Magic, Netrunner, GoT) </div>
        <select class="answer browser-default" id="q7">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
    </div>
    <div class="questionBlock">
        <div class="question">Q8: Childhood games (Monopoly, Pictionary, Parcheesi)</div>
        <select class="answer browser-default" id="q8">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
    </div>
    <div class="questionBlock">
        <div class="question">Q9: Family (7wonders, Patchwork, Splendor)</div>
        <select class="answer browser-default" id="q9">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
    </div>
    <div class="questionBlock">
        <div class="question">Q10: Video Games (You don't know Jack, Heads up)</div>
        <select class="answer browser-default" id="q10">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
    </div>
    </div>

    <!-- Modal Trigger -->
    <button data-target="modal1" class="btn modal-trigger" id="submission-button">submit</button>
    </div>
    <div id="footer">&#169; Copyright 2017 Fahad Rahman</div>
    </div>

    <!-- <div id="open-modal" class="modalDialog">
        <div>
            <a href="/" title="Close" class="close">X</a>
            <h2 id="modal-heading">We've found your Board Game Buddy!</h2>
            <div id="matchInfo">
                <img src="" id="matchPic" alt="profile picutre">
                <div id="matchName"></div>
            </div>
        </div>
    </div> -->


    <!-- Modal Structure -->
    <div id="modal1" class="modal">
        <div class="container">
            <div class="row justify-content-center">
                <div class="modal-content">
                    <h4 id="modal-heading" class="center-align">WE FOUND YOUR MATCH</h4>
                    <div id="matchInfo">
                        <img src="" id="matchPic" alt="profile picture">
                        <h6>name:<h6 id="matchName"></h6> </h6>
                        <div class="modal-footer">
                            <button href="#!" class="modal-close btn-floating waves-effect red">Exit</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

                    <!-- JQuery -->
                    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
                    <!-- Compiled and minified JavaScript -->
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

                    <script type="text/javascript">
                        $(document).ready(function () {
                            $('.modal').modal();
                        });

                        $('#submission-button').off().click(function () {
                            let name = $('#nameFld').val().trim() || "No Name"
                            let picURL = $('#picFld').val().trim() || "No picture provided"
                            let ansArray = [
                                $("#q1").val(),
                                $("#q2").val(),
                                $("#q3").val(),
                                $("#q4").val(),
                                $("#q5").val(),
                                $("#q6").val(),
                                $("#q7").val(),
                                $("#q8").val(),
                                $("#q9").val(),
                                $("#q10").val()]
                            let personObj = {};

                            personObj = {
                                name: name,
                                photo: picURL,
                                scores: ansArray
                            }
                            console.log(name);
                            console.log(personObj)
                            $.post('/newperson', personObj, function (data) {
                                console.log('your match is ' + data.name);
                                console.log("data Added")
                                $('#matchPic').attr("src", data.photo);
                                $('#matchName').text(data.name);
                                $('.close').off().click(function () {
                                })

                            });

                        })
        // var config = {
        //     '.chosen-select': {},
        //     '.chosen-select-deselect': { allow_single_deselect: true },
        //     '.chosen-select-no-single': { disable_search_threshold: 10 },
        //     '.chosen-select-no-results': { no_results_text: 'Oops, nothing found!' },
        //     '.chosen-select-width': { width: "95%" }
        // }
        // for (var selector in config) {
        //     $(selector).chosen(config[selector]);
        // }
        // // Capture the form inputs
        // $("#submit").on("click", function (event) {


        //     // Form validation
        //     function validateForm() {
        //         var isValid = true;
        //         $(".form-control").each(function () {
        //             if ($(this).val() === "") {
        //                 isValid = false;
        //             }
        //         });

        //         $(".chosen-select").each(function () {

        //             if ($(this).val() === "") {
        //                 isValid = false;
        //             }
        //         });
        //         return isValid;
        //     }

        //     // If all required fields are filled
        //     if (validateForm() === true) {
        //         // Create an object for the user"s data
        //         var userData = {
        //             name: $("#name").val(),
        //             photo: $("#photo").val(),
        //             scores: [
                        // $("#q1").val(),
                        // $("#q2").val(),
                        // $("#q3").val(),
                        // $("#q4").val(),
                        // $("#q5").val(),
                        // $("#q6").val(),
                        // $("#q7").val(),
                        // $("#q8").val(),
                        // $("#q9").val(),
                        // $("#q10").val()
        //             ]
        //         };

        //         var currentURL = window.location.origin;
        //         // AJAX post the data to the friends API.
        //         $.post(currentURL + '/api/friends', userData, function (data) {

        //             // Grab the result from the AJAX post so that the best match's name and photo are displayed.
        //             $("#match-name").text(data.name);
        //             $("#match-img").attr("src", data.photo);
        //             // Show the modal with the best match
        //             $('#result-modal').modal('toggle');

        //         });
        //     } else {
        //         alert("Please fill out all fields before submitting!");
        //     }
        // });

                    </script>
                    <!-- Latest compiled and minified JavaScript -->


</body>

</html>