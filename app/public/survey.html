<!DOCTYPE html>

<head>
    <title>Friend Finder Survey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"> </head>

<body>
    <h4 id="instructions" class="center-align bold-text">
        Answer the following questions with option 1 (being the lowest) and option 5 (being the highest). Good Luck!!!
    </h4>
    <div class="container">
        <div id="name" class="personal-info">
            <label for="name">Name:</label>
            <input type="text" name="name" id="nameFld" required>
        </div>
        <div id="pic" class="personal-info">
            <label for="picture">Picture URL:</label>
            <input type="text" name="picture" id="picFld">
        </div>


        <div id="survey">
            <div class="question">Q1: Do you like rock music?</div>
            <select class="answer browser-default" id="q1">
                <option value=""></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>
        <div class="question">Q2: Do you enjoy traveling?</div>
        <select class="answer browser-default" id="q2">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <div class="question">Q3: Are you okay with having a lot of pets?</div>
        <select class="answer browser-default" id="q3">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <div class="question">Q4: How is your mental stability?</div>
        <select class="answer browser-default" id="q4">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <div class="question">Q5: How is your level patients?</div>
        <select class="answer browser-default" id="q5">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <div class="question">Q6: How is your tolerance of children?</div>
        <select class="answer browser-default" id="q6">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <div class="question">Q7: How is your accountability?</div>
        <select class="answer browser-default" id="q7">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <div class="question">Q8: How well do you handle stressful situations?</div>
        <select class="answer browser-default" id="q8">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <div class="question">Q9: Do you sometimes think to much?</div>
        <select class="answer browser-default" id="q9">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <div class="question">Q10: Rate your tolerance for conflict.</div>
        <select class="answer browser-default" id="q10">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <!-- Modal Trigger -->
        <button data-target="modal1" class="btn modal-trigger" id="submission-button">submit</button>

    </div>

    </div>
    <div class="center-align bold-text" id="footer">&#169; Copyright 2018 JEFFREY VANHORN </div>
    </div>
    </div>
    </div>
    </div>
    <!-- Modal Structure -->
    <div id="modal1" class="modal">
        <div class="container">
            <div class="row justify-content-center">
                <div class="modal-content">
                    <h4 id="modal-heading" class="center-align">WE FOUND YOUR MATCH</h4>
                    <div id="matchInfo">
                        <img src="" id="matchPic" alt="profile picture">
                        <h6>name:
                            <h6 id="matchName"></h6>
                        </h6>
                        <div class="modal-footer">
                            <button href="#!" class="modal-close btn-floating waves-effect red">Exit</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('.modal').modal();
        });

        $('#submission-button').off().click(function () {
            let name = $('#nameFld').val().trim() || "No Name"
            let picURL = $('#picFld').val().trim() || "No picture provided"
            let ansArray = [
                $("#q1").val(),
                $("#q2").val(),
                $("#q3").val(),
                $("#q4").val(),
                $("#q5").val(),
                $("#q6").val(),
                $("#q7").val(),
                $("#q8").val(),
                $("#q9").val(),
                $("#q10").val()]
            let personObj = {};

            personObj = {
                name: name,
                photo: picURL,
                scores: ansArray
            }
            console.log(name);
            console.log(personObj)
            $.post('/newperson', personObj, function (data) {
                console.log('your match is ' + data.name);
                console.log("data Added")
                $('#matchPic').attr("src", data.photo);
                $('#matchName').text(data.name);
                $('.close').off().click(function () {
                })

            });

        })

    </script>
</body>

</html>